!function(e){function t(t){for(var n,o,a=t[0],i=t[1],s=0,c=[];s<a.length;s++)o=a[s],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&c.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(f&&f(t);c.length;)c.shift()()}var n={},r={0:0};var o={};var a={3:function(){return{"./webgl_bg.js":{__wbg_log_9aa6786f4afc2ed4:function(e,t){return n[1].exports.ib(e,t)},__wbindgen_object_drop_ref:function(e){return n[1].exports.qc(e)},__wbg_deleteBuffer_3f297711135614ba:function(e,t){return n[1].exports.y(e,t)},__wbg_fetch_4c573de80c1807e3:function(e,t,r){return n[1].exports.J(e,t,r)},__wbg_instanceof_Response_7d08290905bb6381:function(e){return n[1].exports.cb(e)},__wbg_text_bb2ab1ec910d6485:function(e){return n[1].exports.Pb(e)},__wbindgen_string_get:function(e,t){return n[1].exports.sc(e,t)},__wbg_isArray_1a583db6177943a8:function(e){return n[1].exports.fb(e)},__wbg_length_8dacd620a01b769a:function(e){return n[1].exports.gb(e)},__wbg_get_19b6d907de84efbc:function(e,t){return n[1].exports.V(e,t)},__wbindgen_json_serialize:function(e,t){return n[1].exports.mc(e,t)},__wbg_bufferData_30e5070c8f83f307:function(e,t,r,o){return n[1].exports.i(e,t,r,o)},__wbindgen_memory:function(){return n[1].exports.nc()},__wbg_buffer_3b2c485d32021ccc:function(e){return n[1].exports.k(e)},__wbg_new_31f761317592ab6f:function(e){return n[1].exports.mb(e)},__wbg_subarray_da17778cf9ce01c7:function(e,t,r){return n[1].exports.Ib(e,t,r)},__wbg_bufferSubData_d4cc046d2735031b:function(e,t,r,o){return n[1].exports.j(e,t,r,o)},__wbg_createVertexArray_cac6aa68bf3644e0:function(e){return n[1].exports.w(e)},__wbg_log_d85e484a8ba03c98:function(e){return n[1].exports.jb(e)},__wbg_deleteVertexArray_adb9b163093754e8:function(e,t){return n[1].exports.A(e,t)},__wbg_createBuffer_45e7132a460d7416:function(e){return n[1].exports.r(e)},__wbg_bindBuffer_cc67660a7f99cf8b:function(e,t,r){return n[1].exports.d(e,t,r)},__wbg_vertexAttribPointer_eee48ed0873e601b:function(e,t,r,o,a,i,s){return n[1].exports.ac(e,t,r,o,a,i,s)},__wbg_enableVertexAttribArray_2fb0e0e3bd9efecc:function(e,t){return n[1].exports.G(e,t)},__wbg_new_59cb74e423758ede:function(){return n[1].exports.nb()},__wbg_stack_558ba5917b466edd:function(e,t){return n[1].exports.Hb(e,t)},__wbg_error_4bb6c2a97407129a:function(e,t){return n[1].exports.I(e,t)},__wbg_self_8a533577b0c752d3:function(){return n[1].exports.zb()},__wbg_window_5912543aff64b459:function(){return n[1].exports.dc()},__wbg_globalThis_8f997d48cb67f28e:function(){return n[1].exports.W()},__wbg_global_69b29294e4daedff:function(){return n[1].exports.X()},__wbindgen_is_undefined:function(e){return n[1].exports.lc(e)},__wbg_newnoargs_714dec97cfe3da72:function(e,t){return n[1].exports.pb(e,t)},__wbg_call_652fa4cfce310118:function(e,t){return n[1].exports.m(e,t)},__wbg_call_0d50cec2d58307ad:function(e,t,r){return n[1].exports.l(e,t,r)},__wbg_newwithbyteoffsetandlength_0474cc8f3c79d5f9:function(e,t,r){return n[1].exports.qb(e,t,r)},__wbg_newwithbyteoffsetandlength_fde2ab6e9bd53d94:function(e,t,r){return n[1].exports.sb(e,t,r)},__wbindgen_debug_string:function(e,t){return n[1].exports.kc(e,t)},__wbindgen_throw:function(e,t){return n[1].exports.uc(e,t)},__wbindgen_rethrow:function(e){return n[1].exports.rc(e)},__wbindgen_cb_drop:function(e){return n[1].exports.fc(e)},__wbg_then_201b9d5deaad5d11:function(e,t,r){return n[1].exports.Qb(e,t,r)},__wbg_then_a44670e94672e44d:function(e,t){return n[1].exports.Rb(e,t)},__wbg_resolve_607ba012325a12c4:function(e){return n[1].exports.xb(e)},__wbg_texSubImage3D_5eef3d9da8cea53b:function(e,t,r,o,a,i,s,c,u,f,d,l,_){return n[1].exports.Nb(e,t,r,o,a,i,s,c,u,f,d,l,_)},__wbindgen_object_clone_ref:function(e){return n[1].exports.pc(e)},__wbg_instanceof_Window_747b56d25bab9510:function(e){return n[1].exports.eb(e)},__wbg_new_0599e1276155199a:function(){return n[1].exports.lb()},__wbindgen_string_new:function(e,t){return n[1].exports.tc(e,t)},__wbg_activeTexture_cd2bdafe6ac6a0ca:function(e,t){return n[1].exports.b(e,t)},__wbg_bindTexture_c152014c1f590c01:function(e,t,r){return n[1].exports.f(e,t,r)},__wbg_bindVertexArray_0157543bdbffb06e:function(e,t){return n[1].exports.g(e,t)},__wbg_drawElements_0f9b6bbedd3bebcf:function(e,t,r,o,a){return n[1].exports.F(e,t,r,o,a)},__wbg_createTexture_0656936373117662:function(e){return n[1].exports.v(e)},__wbg_texParameteri_605a63bf3a0a4b49:function(e,t,r,o){return n[1].exports.Mb(e,t,r,o)},__wbg_texImage3D_2327f290d4c5740d:function(e,t,r,o,a,i,s,c,u,f,d,l){return n[1].exports.Lb(e,t,r,o,a,i,s,c,u,f,d,l)},__wbg_generateMipmap_77c3e72f06e7a4c2:function(e,t){return n[1].exports.L(e,t)},__wbg_texSubImage3D_c2face1549f0ffe2:function(e,t,r,o,a,i,s,c,u,f,d,l){return n[1].exports.Ob(e,t,r,o,a,i,s,c,u,f,d,l)},__wbg_deleteTexture_bd49372545cdb940:function(e,t){return n[1].exports.z(e,t)},__wbg_uniformMatrix4fv_007cb082e7936bd4:function(e,t,r,o,a){return n[1].exports.Xb(e,t,r,o,a)},__wbg_width_8d70143974f53aba:function(e){return n[1].exports.cc(e)},__wbg_height_5de843709a60a262:function(e){return n[1].exports.Y(e)},__wbg_disableVertexAttribArray_73c64380cd778613:function(e,t){return n[1].exports.B(e,t)},__wbg_useProgram_c410661f5bd7e81b:function(e,t){return n[1].exports.Yb(e,t)},__wbg_uniform1fv_f7f36e76fc1b2c9a:function(e,t,r,o){return n[1].exports.Tb(e,t,r,o)},__wbg_uniform4f_c4d40e40e608ea3b:function(e,t,r,o,a,i){return n[1].exports.Wb(e,t,r,o,a,i)},__wbg_uniform1f_1d29b82642fdb790:function(e,t,r){return n[1].exports.Sb(e,t,r)},__wbg_uniform2f_278c281b29e9e2c3:function(e,t,r,o){return n[1].exports.Vb(e,t,r,o)},__wbg_uniform1i_4ddec7fb50640fc1:function(e,t,r){return n[1].exports.Ub(e,t,r)},__wbg_createShader_d75402f5935812f0:function(e,t){return n[1].exports.u(e,t)},__wbg_shaderSource_34af5e76165e6a02:function(e,t,r,o){return n[1].exports.Gb(e,t,r,o)},__wbg_compileShader_937cb022d149ec18:function(e,t){return n[1].exports.q(e,t)},__wbg_getShaderParameter_d526091c5166c9a7:function(e,t,r){return n[1].exports.T(e,t,r)},__wbindgen_boolean_get:function(e){return n[1].exports.ec(e)},__wbg_getShaderInfoLog_c4c33d53565d30d6:function(e,t,r){return n[1].exports.S(e,t,r)},__wbg_texImage2D_ee1e475e0e91b3b2:function(e,t,r,o,a,i,s){return n[1].exports.Kb(e,t,r,o,a,i,s)},__wbg_performance_f7851e83824fd096:function(e){return n[1].exports.wb(e)},__wbg_now_0aafc2276b5e8d61:function(e){return n[1].exports.tb(e)},__wbg_setwidth_7a7150718cc3f0e6:function(e,t){return n[1].exports.Fb(e,t)},__wbg_setheight_c61e5a9990ad7131:function(e,t){return n[1].exports.Bb(e,t)},__wbg_viewport_b47ae83b1f5bfbe9:function(e,t,r,o,a){return n[1].exports.bc(e,t,r,o,a)},__wbg_scissor_40f682e522ab20d2:function(e,t,r,o,a){return n[1].exports.yb(e,t,r,o,a)},__wbg_setonload_f35002b2488461d3:function(e,t){return n[1].exports.Db(e,t)},__wbg_setonerror_eb00bf5798315cb9:function(e,t){return n[1].exports.Cb(e,t)},__wbg_setsrc_7e888e4ced74b27b:function(e,t,r){return n[1].exports.Eb(e,t,r)},__wbg_onload_d85a3367a2cdcbb0:function(e){return n[1].exports.ub(e)},__wbg_new_8719da26c0a1fd20:function(e,t){return n[1].exports.ob(e,t)},__wbg_document_c9bb82e72b87972b:function(e){return n[1].exports.D(e)},__wbg_getElementById_66a113a03886aac6:function(e,t,r){return n[1].exports.O(e,t,r)},__wbg_instanceof_HtmlCanvasElement_0feb941e3d100079:function(e){return n[1].exports.bb(e)},__wbg_parse_b6e057bc5004a9ad:function(e,t){return n[1].exports.vb(e,t)},__wbg_getContext_7fb33d2f2a33d083:function(e,t,r,o){return n[1].exports.N(e,t,r,o)},__wbg_instanceof_WebGl2RenderingContext_0f1d0ce1f564cddc:function(e){return n[1].exports.db(e)},__wbg_createProgram_0e01a0272abf80f2:function(e){return n[1].exports.t(e)},__wbg_attachShader_703542f74d3f4655:function(e,t,r){return n[1].exports.c(e,t,r)},__wbg_linkProgram_13df874c1ec00220:function(e,t){return n[1].exports.hb(e,t)},__wbg_getProgramParameter_30ca8607cd79baba:function(e,t,r){return n[1].exports.R(e,t,r)},__wbg_getProgramInfoLog_a7e39255ecb0047b:function(e,t,r){return n[1].exports.Q(e,t,r)},__wbindgen_number_get:function(e,t){return n[1].exports.oc(e,t)},__wbg_getActiveUniform_30cc8778e1ba660f:function(e,t,r){return n[1].exports.M(e,t,r)},__wbg_name_3db390fc2fc091fb:function(e,t){return n[1].exports.kb(e,t)},__wbg_getUniformLocation_2085f6ce304f30ee:function(e,t,r,o){return n[1].exports.U(e,t,r,o)},__wbg_blendFuncSeparate_a1abbb6bdfc0a7dc:function(e,t,r,o,a){return n[1].exports.h(e,t,r,o,a)},__wbg_enable_a684b41864515bb5:function(e,t){return n[1].exports.H(e,t)},__wbg_cullFace_bf527eb4959a8aa8:function(e,t){return n[1].exports.x(e,t)},__wbg_innerWidth_32946fda40a6a23f:function(e){return n[1].exports.ab(e)},__wbg_innerHeight_58f8a4f389150bf7:function(e){return n[1].exports.Z(e)},__wbg_canvas_c621ddfce1286dee:function(e){return n[1].exports.n(e)},__wbg_setcrossOrigin_7c6eec94244d24ba:function(e,t,r){return n[1].exports.Ab(e,t,r)},__wbindgen_cb_forget:function(e){return n[1].exports.gc(e)},__wbg_getExtension_59696a785661b89b:function(e,t,r){return n[1].exports.P(e,t,r)},__wbg_texImage2D_3c5bf32a5f1e7dff:function(e,t,r,o,a,i,s,c,u,f,d){return n[1].exports.Jb(e,t,r,o,a,i,s,c,u,f,d)},__wbg_createFramebuffer_28e45abdb795ab52:function(e){return n[1].exports.s(e)},__wbg_bindFramebuffer_47d9a15ce41e5299:function(e,t,r){return n[1].exports.e(e,t,r)},__wbg_framebufferTexture2D_58968036d9154ea5:function(e,t,r,o,a,i){return n[1].exports.K(e,t,r,o,a,i)},__wbg_newwithbyteoffsetandlength_f6d835c6e3d68e8c:function(e,t,r){return n[1].exports.rb(e,t,r)},__wbg_vertexAttribDivisor_97df148c554b5fea:function(e,t,r){return n[1].exports.Zb(e,t,r)},__wbg_clearColor_56271725c115c7e9:function(e,t,r,o,a){return n[1].exports.o(e,t,r,o,a)},__wbg_clear_7a35983521c8dcf9:function(e,t){return n[1].exports.p(e,t)},__wbg_drawElementsInstanced_28f7d73790509e68:function(e,t,r,o,a,i){return n[1].exports.E(e,t,r,o,a,i)},__wbg_disable_e64678c1a700d912:function(e,t){return n[1].exports.C(e,t)},__wbindgen_closure_wrapper3639:function(e,t,r){return n[1].exports.ic(e,t,r)},__wbindgen_closure_wrapper1207:function(e,t,r){return n[1].exports.hc(e,t,r)},__wbindgen_closure_wrapper3643:function(e,t,r){return n[1].exports.jc(e,t,r)}}}}};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise(function(t,o){n=r[e]=[t,o]});t.push(n[2]=s);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=function(e){return i.p+""+e+".index.js"}(e);var f=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",f.name="ChunkLoadError",f.type=o,f.request=a,n[1](f)}r[e]=void 0}};var d=setTimeout(function(){c({type:"timeout",target:u})},12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return({2:[3]}[e]||[]).forEach(function(e){var n=o[e];if(n)t.push(n);else{var r,s=a[e](),c=fetch(i.p+""+{3:"f180776cf016fc99c245"}[e]+".module.wasm");if(s instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)r=Promise.all([WebAssembly.compileStreaming(c),s]).then(function(e){return WebAssembly.instantiate(e[0],e[1])});else if("function"==typeof WebAssembly.instantiateStreaming)r=WebAssembly.instantiateStreaming(c,s);else{r=c.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,s)})}t.push(o[e]=r.then(function(t){return i.w[e]=(t.instance||t).exports}))}}),Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e},i.w={};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var f=c;i(i.s=0)}([function(e,t,n){"use strict";n.r(t);let r=[{name:"catalog_aitoff",path:{vert:"src/shaders/catalogs/aitoff.vert",frag:"src/shaders/catalogs/aitoff.frag"}},{name:"catalog_mercator",path:{vert:"src/shaders/catalogs/mercator.vert",frag:"src/shaders/catalogs/mercator.frag"}},{name:"catalog_mollweide",path:{vert:"src/shaders/catalogs/mollweide.vert",frag:"src/shaders/catalogs/mollweide.frag"}},{name:"catalog_ortho",path:{vert:"src/shaders/catalogs/ortho.vert",frag:"src/shaders/catalogs/ortho.frag"}},{name:"black_white_linear",path:{vert:"src/shaders/colormaps/blackwhite.vert",frag:"src/shaders/colormaps/blackwhite.frag"}},{name:"BluePastelRed",path:{vert:"src/shaders/colormaps/BluePastelRed.vert",frag:"src/shaders/colormaps/BluePastelRed.frag"}},{name:"IDL_CB_BrBG",path:{vert:"src/shaders/colormaps/IDL_CB_BrBG.vert",frag:"src/shaders/colormaps/IDL_CB_BrBG.frag"}},{name:"IDL_CB_GnBu",path:{vert:"src/shaders/colormaps/IDL_CB_GnBu.vert",frag:"src/shaders/colormaps/IDL_CB_GnBu.frag"}},{name:"IDL_CB_YIGnBu",path:{vert:"src/shaders/colormaps/IDL_CB_YIGnBu.vert",frag:"src/shaders/colormaps/IDL_CB_YIGnBu.frag"}},{name:"red_temperature",path:{vert:"src/shaders/colormaps/red.vert",frag:"src/shaders/colormaps/red.frag"}},{name:"grid_aitoff",path:{vert:"src/shaders/grid/aitoff.vert",frag:"src/shaders/grid/aitoff.frag"}},{name:"grid_ortho",path:{vert:"src/shaders/grid/ortho.vert",frag:"src/shaders/grid/ortho.frag"}},{name:"grid_mollweide",path:{vert:"src/shaders/grid/mollweide.vert",frag:"src/shaders/grid/mollweide.frag"}},{name:"grid_mercator",path:{vert:"src/shaders/grid/mercator.vert",frag:"src/shaders/grid/mercator.frag"}},{name:"raytracer",path:{vert:"src/shaders/hips/raytracer.vert",frag:"src/shaders/hips/raytracer.frag"}},{name:"rasterizer_aitoff",path:{vert:"src/shaders/hips/rasterizer/aitoff.vert",frag:"src/shaders/hips/rasterizer/aitoff.frag"}},{name:"rasterizer_mercator",path:{vert:"src/shaders/hips/rasterizer/mercator.vert",frag:"src/shaders/hips/rasterizer/mercator.frag"}},{name:"rasterizer_mollweide",path:{vert:"src/shaders/hips/rasterizer/mollweide.vert",frag:"src/shaders/hips/rasterizer/mollweide.frag"}},{name:"rasterizer_ortho",path:{vert:"src/shaders/hips/rasterizer/ortho.vert",frag:"src/shaders/hips/rasterizer/ortho.frag"}},{name:"text",path:{vert:"src/shaders/misc/text.vert",frag:"src/shaders/misc/text.frag"}}];"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},writable:!0,configurable:!0}),"function"!=typeof Array.from&&(Array.from=function(e){return[].slice.call(e)});var o=function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!1),e.dispatchEvent(n)};!function(){var e=function(e,t){this.el=e,this.zoomFactor=1,this.lastScale=1,this.offset={x:0,y:0},this.initialOffset={x:0,y:0},this.options=Object.assign({},this.defaults,t),this.setupMarkup(),this.bindEvents(),this.update(),this.isImageLoaded(this.el)&&(this.updateAspectRatio(),this.setupOffsets()),this.enable()},t=function(e,t){return e+t};e.prototype={defaults:{tapZoomFactor:2,zoomOutFactor:1.3,animationDuration:300,maxZoom:4,minZoom:.5,draggableUnzoomed:!0,lockDragAxis:!1,setOffsetsOnce:!1,use2d:!0,zoomStartEventName:"pz_zoomstart",zoomUpdateEventName:"pz_zoomupdate",zoomEndEventName:"pz_zoomend",dragStartEventName:"pz_dragstart",dragUpdateEventName:"pz_dragupdate",dragEndEventName:"pz_dragend",doubleTapEventName:"pz_doubletap",verticalPadding:0,horizontalPadding:0,onZoomStart:null,onZoomEnd:null,onZoomUpdate:null,onDragStart:null,onDragEnd:null,onDragUpdate:null,onDoubleTap:null},handleDragStart:function(e){o(this.el,this.options.dragStartEventName),"function"==typeof this.options.onDragStart&&this.options.onDragStart(this,e),this.stopAnimation(),this.lastDragPosition=!1,this.hasInteraction=!0,this.handleDrag(e)},handleDrag:function(e){var t=this.getTouches(e)[0];this.drag(t,this.lastDragPosition),this.offset=this.sanitizeOffset(this.offset),this.lastDragPosition=t},handleDragEnd:function(){o(this.el,this.options.dragEndEventName),"function"==typeof this.options.onDragEnd&&this.options.onDragEnd(this,event),this.end()},handleZoomStart:function(e){o(this.el,this.options.zoomStartEventName),"function"==typeof this.options.onZoomStart&&this.options.onZoomStart(this,e),this.stopAnimation(),this.lastScale=1,this.nthZoom=0,this.lastZoomCenter=!1,this.hasInteraction=!0},handleZoom:function(e,t){var n=this.getTouchCenter(this.getTouches(e)),r=t/this.lastScale;this.lastScale=t,this.nthZoom+=1,this.nthZoom>3&&(this.scale(r,n),this.drag(n,this.lastZoomCenter)),this.lastZoomCenter=n},handleZoomEnd:function(){o(this.el,this.options.zoomEndEventName),"function"==typeof this.options.onZoomEnd&&this.options.onZoomEnd(this,event),this.end()},handleDoubleTap:function(e){var t=this.getTouches(e)[0],n=this.zoomFactor>1?1:this.options.tapZoomFactor,r=this.zoomFactor,a=function(e){this.scaleTo(r+e*(n-r),t)}.bind(this);this.hasInteraction||(this.isDoubleTap=!0,r>n&&(t=this.getCurrentZoomCenter()),this.animate(this.options.animationDuration,a,this.swing),o(this.el,this.options.doubleTapEventName),"function"==typeof this.options.onDoubleTap&&this.options.onDoubleTap(this,e))},computeInitialOffset:function(){this.initialOffset={x:-Math.abs(this.el.offsetWidth*this.getInitialZoomFactor()-this.container.offsetWidth)/2,y:-Math.abs(this.el.offsetHeight*this.getInitialZoomFactor()-this.container.offsetHeight)/2}},resetOffset:function(){this.offset.x=this.initialOffset.x,this.offset.y=this.initialOffset.y},isImageLoaded:function(e){return"IMG"===e.nodeName?e.complete&&0!==e.naturalHeight:Array.from(e.querySelectorAll("img")).every(this.isImageLoaded)},setupOffsets:function(){this.options.setOffsetsOnce&&this._isOffsetsSet||(this._isOffsetsSet=!0,this.computeInitialOffset(),this.resetOffset())},sanitizeOffset:function(e){var t=this.el.offsetWidth*this.getInitialZoomFactor()*this.zoomFactor,n=this.el.offsetHeight*this.getInitialZoomFactor()*this.zoomFactor,r=t-this.getContainerX()+this.options.horizontalPadding,o=n-this.getContainerY()+this.options.verticalPadding,a=Math.max(r,0),i=Math.max(o,0),s=Math.min(r,0)-this.options.horizontalPadding,c=Math.min(o,0)-this.options.verticalPadding;return{x:Math.min(Math.max(e.x,s),a),y:Math.min(Math.max(e.y,c),i)}},scaleTo:function(e,t){this.scale(e/this.zoomFactor,t)},scale:function(e,t){e=this.scaleZoomFactor(e),this.addOffset({x:(e-1)*(t.x+this.offset.x),y:(e-1)*(t.y+this.offset.y)}),o(this.el,this.options.zoomUpdateEventName),"function"==typeof this.options.onZoomUpdate&&this.options.onZoomUpdate(this,event)},scaleZoomFactor:function(e){var t=this.zoomFactor;return this.zoomFactor*=e,this.zoomFactor=Math.min(this.options.maxZoom,Math.max(this.zoomFactor,this.options.minZoom)),this.zoomFactor/t},canDrag:function(){return this.options.draggableUnzoomed||!((e=this.zoomFactor)>(t=1)-.01&&e<t+.01);var e,t},drag:function(e,t){t&&(this.options.lockDragAxis?Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?this.addOffset({x:-(e.x-t.x),y:0}):this.addOffset({y:-(e.y-t.y),x:0}):this.addOffset({y:-(e.y-t.y),x:-(e.x-t.x)}),o(this.el,this.options.dragUpdateEventName),"function"==typeof this.options.onDragUpdate&&this.options.onDragUpdate(this,event))},getTouchCenter:function(e){return this.getVectorAvg(e)},getVectorAvg:function(e){return{x:e.map(function(e){return e.x}).reduce(t)/e.length,y:e.map(function(e){return e.y}).reduce(t)/e.length}},addOffset:function(e){this.offset={x:this.offset.x+e.x,y:this.offset.y+e.y}},sanitize:function(){this.zoomFactor<this.options.zoomOutFactor?this.zoomOutAnimation():this.isInsaneOffset(this.offset)&&this.sanitizeOffsetAnimation()},isInsaneOffset:function(e){var t=this.sanitizeOffset(e);return t.x!==e.x||t.y!==e.y},sanitizeOffsetAnimation:function(){var e=this.sanitizeOffset(this.offset),t=this.offset.x,n=this.offset.y,r=function(r){this.offset.x=t+r*(e.x-t),this.offset.y=n+r*(e.y-n),this.update()}.bind(this);this.animate(this.options.animationDuration,r,this.swing)},zoomOutAnimation:function(){if(1!==this.zoomFactor){var e=this.zoomFactor,t=this.getCurrentZoomCenter(),n=function(n){this.scaleTo(e+n*(1-e),t)}.bind(this);this.animate(this.options.animationDuration,n,this.swing)}},updateAspectRatio:function(){this.unsetContainerY(),this.setContainerY(this.container.parentElement.offsetHeight)},getInitialZoomFactor:function(){var e=this.container.offsetWidth/this.el.offsetWidth,t=this.container.offsetHeight/this.el.offsetHeight;return Math.min(e,t)},getAspectRatio:function(){return this.el.offsetWidth/this.el.offsetHeight},getCurrentZoomCenter:function(){var e=this.offset.x-this.initialOffset.x,t=-1*this.offset.x-e/(1/this.zoomFactor-1),n=this.offset.y-this.initialOffset.y;return{x:t,y:-1*this.offset.y-n/(1/this.zoomFactor-1)}},getTouches:function(e){var t=this.container.getBoundingClientRect(),n=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.scrollLeft||document.body.scrollLeft,o=t.top+n,a=t.left+r;return Array.prototype.slice.call(e.touches).map(function(e){return{x:e.pageX-a,y:e.pageY-o}})},animate:function(e,t,n,r){var o=(new Date).getTime(),a=function(){if(this.inAnimation){var i=(new Date).getTime()-o,s=i/e;i>=e?(t(1),r&&r(),this.update(),this.stopAnimation(),this.update()):(n&&(s=n(s)),t(s),this.update(),requestAnimationFrame(a))}}.bind(this);this.inAnimation=!0,requestAnimationFrame(a)},stopAnimation:function(){this.inAnimation=!1},swing:function(e){return-Math.cos(e*Math.PI)/2+.5},getContainerX:function(){return this.container.offsetWidth},getContainerY:function(){return this.container.offsetHeight},setContainerY:function(e){return this.container.style.height=e+"px"},unsetContainerY:function(){this.container.style.height=null},setupMarkup:function(){var e,t;this.container=(e='<div class="pinch-zoom-container"></div>',(t=document.implementation.createHTMLDocument("")).body.innerHTML=e,Array.from(t.body.children)[0]),this.el.parentNode.insertBefore(this.container,this.el),this.container.appendChild(this.el),this.container.style.overflow="hidden",this.container.style.position="relative",this.el.style.webkitTransformOrigin="0% 0%",this.el.style.mozTransformOrigin="0% 0%",this.el.style.msTransformOrigin="0% 0%",this.el.style.oTransformOrigin="0% 0%",this.el.style.transformOrigin="0% 0%",this.el.style.position="absolute"},end:function(){this.hasInteraction=!1,this.sanitize(),this.update()},bindEvents:function(){var e=this;n(this.container,this),window.addEventListener("resize",this.update.bind(this)),Array.from(this.el.querySelectorAll("img")).forEach(function(t){t.addEventListener("load",e.update.bind(e))}),"IMG"===this.el.nodeName&&this.el.addEventListener("load",this.update.bind(this))},update:function(e){this.updatePlaned||(this.updatePlaned=!0,window.setTimeout(function(){this.updatePlaned=!1,e&&"resize"===e.type&&(this.updateAspectRatio(),this.setupOffsets()),e&&"load"===e.type&&(this.updateAspectRatio(),this.setupOffsets());var t=this.getInitialZoomFactor()*this.zoomFactor,n=-this.offset.x/t,r=-this.offset.y/t,o="scale3d("+t+", "+t+",1) translate3d("+n+"px,"+r+"px,0px)",a="scale("+t+", "+t+") translate("+n+"px,"+r+"px)",i=function(){this.clone&&(this.clone.parentNode.removeChild(this.clone),delete this.clone)}.bind(this);!this.options.use2d||this.hasInteraction||this.inAnimation?(this.is3d=!0,i(),this.el.style.webkitTransform=o,this.el.style.mozTransform=a,this.el.style.msTransform=a,this.el.style.oTransform=a,this.el.style.transform=o):(this.is3d&&(this.clone=this.el.cloneNode(!0),this.clone.style.pointerEvents="none",this.container.appendChild(this.clone),window.setTimeout(i,200)),this.el.style.webkitTransform=a,this.el.style.mozTransform=a,this.el.style.msTransform=a,this.el.style.oTransform=a,this.el.style.transform=a,this.is3d=!1)}.bind(this),0))},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1}};var n=function(e,t){var n=null,r=0,o=null,a=null,i=function(e,r){if(n!==e){if(n&&!e)switch(n){case"zoom":t.handleZoomEnd(r);break;case"drag":t.handleDragEnd(r)}switch(e){case"zoom":t.handleZoomStart(r);break;case"drag":t.handleDragStart(r)}}n=e},s=function(e){2===r?i("zoom"):1===r&&t.canDrag()?i("drag",e):i(null,e)},c=function(e){return Array.from(e).map(function(e){return{x:e.pageX,y:e.pageY}})},u=function(e,t){var n,r;return n=e.x-t.x,r=e.y-t.y,Math.sqrt(n*n+r*r)},f=function(e){e.stopPropagation(),e.preventDefault()},d=!0;e.addEventListener("touchstart",function(e){t.enabled&&(d=!0,r=e.touches.length,function(e){var a=(new Date).getTime();if(r>1&&(o=null),a-o<300)switch(f(e),t.handleDoubleTap(e),n){case"zoom":t.handleZoomEnd(e);break;case"drag":t.handleDragEnd(e)}else t.isDoubleTap=!1;1===r&&(o=a)}(e))}),e.addEventListener("touchmove",function(e){if(t.enabled&&!t.isDoubleTap){if(d)s(e),n&&f(e),a=c(e.touches);else{switch(n){case"zoom":2==a.length&&2==e.touches.length&&t.handleZoom(e,function(e,t){var n=u(e[0],e[1]);return u(t[0],t[1])/n}(a,c(e.touches)));break;case"drag":t.handleDrag(e)}n&&(f(e),t.update())}d=!1}}),e.addEventListener("touchend",function(e){t.enabled&&(r=e.touches.length,s(e))})}}();function a(e){let t=document.getElementById("canvas");(()=>{let n=new Array,r=!1,o=!1,a=0;function i(e){let t=function(e){for(let t=0;t<n.length;t++){if(n[t].identifier==e)return t}return-1}(e.identifier);n.splice(t,1,e)}t.addEventListener("touchstart",t=>{t.preventDefault();let i=t.changedTouches[0];n.push(i);let s=n.length;1==s?(r=!0,e.press_left_mouse_button(i.pageX,i.pageY)):2==s?(e.release_left_mouse_button(i.pageX,i.pageY),console.log("stop moving"),r=!1,o=!0,a=Math.hypot(n[0].pageX-n[1].pageX,n[0].pageY-n[1].pageY)):(r=!1,o=!1)},!1);let s=t=>{t.preventDefault();let a=t.changedTouches[0];!function(e){for(let t=0;t<n.length;t++)if(n[t].identifier==e.identifier)return n.splice(t,1),t}(a);r?(e.release_left_mouse_button(a.pageX,a.pageY),console.log("stop moving"),r=!1):o&&(o=!1)};t.addEventListener("touchend",s,!1),t.addEventListener("touchcancel",s,!1),t.addEventListener("touchleave",s,!1),t.addEventListener("touchmove",t=>{if(t.preventDefault(),i(t.changedTouches[0]),r){console.log("move!!");let t=n[0];e.move_mouse(t.pageX,t.pageY)}else if(o){console.log("zoom!!");let t=Math.hypot(n[0].pageX-n[1].pageX,n[0].pageY-n[1].pageY);e.pinch_zoom(t-a),a=t}},!1)})(),t.addEventListener("mousedown",t=>{e.press_left_mouse_button(t.clientX,t.clientY)}),t.addEventListener("mouseup",t=>{e.release_left_mouse_button(t.clientX,t.clientY)}),t.addEventListener("mousemove",t=>{e.move_mouse(t.clientX,t.clientY)}),t.addEventListener("dblclick",t=>{console.log("mouse click double"),e.double_mouse_button_pressed(t.clientX,t.clientY)}),t.addEventListener("wheel",t=>{let n=t.deltaY>0?1:-1;e.wheel_mouse(t.clientX,t.clientY,n)},!1),window.addEventListener("resize",()=>{let t=window.innerWidth,n=window.innerHeight;e.resize(t,n)})}function i(e,t){let n=e.substring(4),r="http://tapvizier.u-strasbg.fr/TAPVizieR/tap/sync?phase=RUN&lang=adql&format=json&request=doQuery&query=SELECT%20TOP%201%20table_name%2C%20column_name%2C%20ucd%20FROM%20TAP_SCHEMA.columns%20WHERE%20table_name%3D%27"+encodeURIComponent(n)+"%27%20AND%20ucd%20LIKE%20%27"+encodeURIComponent(t)+"%25%27";var o={method:"GET",headers:new Headers,mode:"cors",cache:"default"};return fetch(r,o).then(e=>e.json()).then(n=>(console.log(e,t,": here are the data",n.data),n.data[0][1]))}function s(e,t,n="*"){let r=[];t.forEach(t=>{console.log(t),r.push('"'+e+'"."'+encodeURIComponent(t)+'"')});let o="SELECT "+r.join(", ")+' FROM "'+e+'"';console.log(o);let a="http://tapvizier.u-strasbg.fr/TAPVizieR/tap/sync?phase=RUN&lang=adql&format=json&request=doQuery&query="+encodeURIComponent(o);var i={method:"GET",headers:new Headers,mode:"cors",cache:"default"};return fetch(a,i).then(e=>e.json()).then(e=>{return e.data})}let c,u=Date.now();window.addEventListener("load",async()=>{const e=await Promise.all([n.e(1),n.e(2)]).then(n.bind(null,7));let t=await async function(e){return await Promise.all(r.map(async t=>{let n=await e.read(t.path.vert),r=await e.read(t.path.frag);return{name:t.name,vert_src:n,frag_src:r}}))}(e);console.log(t);let o=new e.WebClient(t);!async function(e){var t={method:"GET",headers:new Headers,mode:"cors",cache:"default"};let[n,r]=await fetch("https://alasky.u-strasbg.fr/MocServer/query?hips_service_url*=*alasky*&&dataproduct_type=image&&hips_tile_format=*png*,*jpeg*&get=record&fmt=json",t).then(e=>e.json()).then(e=>{let t=[],n=new Map;for(let r=0;r<e.length;r++){let o=e[r].ID;n[o]={hips_service_url:e[r].hips_service_url,max_depth:e[r].hips_order,tile_width:e[r].hips_tile_width,hips_tile_format:e[r].hips_tile_format},t.push(o)}return[t,n]});new autoComplete({selector:"#hips-selector",minChars:2,source:function(e,t){e=e.toLowerCase();var r=n,o=[];for(let t=0;t<r.length;t++)r[t].toLowerCase().indexOf(e)>=0&&o.push(r[t]);t(o)},renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(n,"<b>$1</b>")+"</div>"},onSelect:function(t,n,o){let a=n,{hips_service_url:i,max_depth:s,hips_tile_format:c,tile_width:u}=r[a];e.change_hips(i,u,s,c)}})}(o),async function(e){var t={method:"GET",headers:new Headers,mode:"cors",cache:"default"};let[n,r]=await fetch("https://alasky.u-strasbg.fr/MocServer/query?expr=dataproduct_type%3Dcatalog%26%26nb_rows<%3D500000%26%26nb_rows>%3D50000%26%26data_ucd%3Dpos.parallax*%26%26data_ucd%3Dphot.mag*&get=record&fmt=json",t).then(e=>e.json()).then(e=>{let t=[],n=new Map;for(var r=0;r<e.length;r++){var o=e[r].ID;n[o]={obs_id:e[r].obs_id},t.push(o)}return[t,n]});new autoComplete({selector:"#catalog-selector",minChars:2,source:function(e,t){e=e.toLowerCase();var r=n,o=[];for(let t=0;t<r.length;t++)r[t].toLowerCase().indexOf(e)>=0&&o.push(r[t]);t(o)},renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(n,"<b>$1</b>")+"</div>"},onSelect:async function(t,n,r){let o=n,a=await i(o,"pos.parallax");console.log("parallax column name: ",a);let c=await i(o,"phot.mag");console.log("phot mag column name: ",c);let u=await i(o,"pos.eq.ra"),f=await i(o,"pos.eq.dec");s(o.substring(4),[u,f,c,a]).then(t=>{console.log("sources: ",t),e.add_catalog("Test",t)})}}),s("J/A+A/566/A43/table2",["RAJ2000","DEJ2000","Bmag","Per"]).then(t=>setTimeout(()=>e.add_catalog("Test",t),1e4))}(o);let f=document.getElementById("proj-select"),d=document.getElementById("enable-grid"),l=document.getElementById("enable-inertia"),_=(document.getElementById("fps-counter"),document.getElementById("grid-color")),h=document.getElementById("grid-alpha"),p=document.getElementById("catalog-alpha"),g=document.getElementById("kernel-strength"),b=document.getElementById("colormap-select"),w=document.getElementById("ra"),x=document.getElementById("dec"),v=document.getElementById("ra_value"),y=document.getElementById("dec_value");document.getElementById("canvas").focus();f.addEventListener("change",()=>{let e=f.value;o.set_projection(e),console.log("change projection to: ",e)},!1),d.addEventListener("change",()=>{d.checked?o.enable_equatorial_grid():o.disable_equatorial_grid()},!1),l.addEventListener("change",()=>{l.checked?o.enable_inertia():o.disable_inertia()},!1),w.addEventListener("change",()=>{console.log("Change!!");let e=w.value,t=x.value;o.set_position(e,t)},!1),x.addEventListener("change",()=>{let e=w.value,t=x.value;o.set_position(e,t)},!1);_.addEventListener("input",e=>{let t=function(e){if(m=e.match(/^#([0-9a-f]{6})$/i)[1],m)return{red:parseInt(m.substr(0,2),16)/255,green:parseInt(m.substr(2,2),16)/255,blue:parseInt(m.substr(4,2),16)/255}}(e.target.value);o.change_grid_color(t.red,t.green,t.blue)},!1),h.addEventListener("input",e=>{let t=e.target.value;o.change_grid_opacity(t)},!1),p.addEventListener("input",e=>{let t=e.target.value;o.set_heatmap_opacity("Test",t)},!1),g.addEventListener("input",e=>{let t=e.target.value;o.set_kernel_strength("Test",t)},!1),b.addEventListener("change",()=>{let e=b.value;o.set_colormap("Test",e)},!1),a(o),u=Date.now(),function e(){window.requestAnimationFrame(e);let t=(c=Date.now())-u;u=c;{let e=o.update(t);o.render(),v.innerText=e[0].toFixed(4),y.innerText=e[1].toFixed(4)}}()})}]);