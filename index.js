!function(e){function t(t){for(var r,o,a=t[0],s=t[1],c=0,i=[];c<a.length;c++)o=a[c],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&i.push(n[o][0]),n[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(u&&u(t);i.length;)i.shift()()}var r={},n={0:0};var o={};var a={3:function(){return{"./webgl_bg.js":{__wbg_log_9aa6786f4afc2ed4:function(e,t){return r[1].exports.ib(e,t)},__wbindgen_object_drop_ref:function(e){return r[1].exports.qc(e)},__wbg_deleteBuffer_3f297711135614ba:function(e,t){return r[1].exports.y(e,t)},__wbg_fetch_4c573de80c1807e3:function(e,t,n){return r[1].exports.J(e,t,n)},__wbg_instanceof_Response_7d08290905bb6381:function(e){return r[1].exports.cb(e)},__wbg_text_bb2ab1ec910d6485:function(e){return r[1].exports.Pb(e)},__wbindgen_string_get:function(e,t){return r[1].exports.sc(e,t)},__wbg_isArray_1a583db6177943a8:function(e){return r[1].exports.fb(e)},__wbg_length_8dacd620a01b769a:function(e){return r[1].exports.gb(e)},__wbg_get_19b6d907de84efbc:function(e,t){return r[1].exports.V(e,t)},__wbindgen_json_serialize:function(e,t){return r[1].exports.mc(e,t)},__wbg_bufferData_30e5070c8f83f307:function(e,t,n,o){return r[1].exports.i(e,t,n,o)},__wbindgen_memory:function(){return r[1].exports.nc()},__wbg_buffer_3b2c485d32021ccc:function(e){return r[1].exports.k(e)},__wbg_new_31f761317592ab6f:function(e){return r[1].exports.mb(e)},__wbg_subarray_da17778cf9ce01c7:function(e,t,n){return r[1].exports.Ib(e,t,n)},__wbg_bufferSubData_d4cc046d2735031b:function(e,t,n,o){return r[1].exports.j(e,t,n,o)},__wbg_createVertexArray_cac6aa68bf3644e0:function(e){return r[1].exports.w(e)},__wbg_log_d85e484a8ba03c98:function(e){return r[1].exports.jb(e)},__wbg_deleteVertexArray_adb9b163093754e8:function(e,t){return r[1].exports.A(e,t)},__wbg_createBuffer_45e7132a460d7416:function(e){return r[1].exports.r(e)},__wbg_bindBuffer_cc67660a7f99cf8b:function(e,t,n){return r[1].exports.d(e,t,n)},__wbg_vertexAttribPointer_eee48ed0873e601b:function(e,t,n,o,a,s,c){return r[1].exports.ac(e,t,n,o,a,s,c)},__wbg_enableVertexAttribArray_2fb0e0e3bd9efecc:function(e,t){return r[1].exports.G(e,t)},__wbg_new_59cb74e423758ede:function(){return r[1].exports.nb()},__wbg_stack_558ba5917b466edd:function(e,t){return r[1].exports.Hb(e,t)},__wbg_error_4bb6c2a97407129a:function(e,t){return r[1].exports.I(e,t)},__wbg_self_8a533577b0c752d3:function(){return r[1].exports.zb()},__wbg_window_5912543aff64b459:function(){return r[1].exports.dc()},__wbg_globalThis_8f997d48cb67f28e:function(){return r[1].exports.W()},__wbg_global_69b29294e4daedff:function(){return r[1].exports.X()},__wbindgen_is_undefined:function(e){return r[1].exports.lc(e)},__wbg_newnoargs_714dec97cfe3da72:function(e,t){return r[1].exports.pb(e,t)},__wbg_call_652fa4cfce310118:function(e,t){return r[1].exports.m(e,t)},__wbg_call_0d50cec2d58307ad:function(e,t,n){return r[1].exports.l(e,t,n)},__wbg_newwithbyteoffsetandlength_0474cc8f3c79d5f9:function(e,t,n){return r[1].exports.qb(e,t,n)},__wbg_newwithbyteoffsetandlength_fde2ab6e9bd53d94:function(e,t,n){return r[1].exports.sb(e,t,n)},__wbindgen_debug_string:function(e,t){return r[1].exports.kc(e,t)},__wbindgen_throw:function(e,t){return r[1].exports.uc(e,t)},__wbindgen_rethrow:function(e){return r[1].exports.rc(e)},__wbindgen_cb_drop:function(e){return r[1].exports.fc(e)},__wbg_then_201b9d5deaad5d11:function(e,t,n){return r[1].exports.Qb(e,t,n)},__wbg_then_a44670e94672e44d:function(e,t){return r[1].exports.Rb(e,t)},__wbg_resolve_607ba012325a12c4:function(e){return r[1].exports.xb(e)},__wbg_texSubImage3D_5eef3d9da8cea53b:function(e,t,n,o,a,s,c,i,_,u,d,f,g){return r[1].exports.Nb(e,t,n,o,a,s,c,i,_,u,d,f,g)},__wbindgen_object_clone_ref:function(e){return r[1].exports.pc(e)},__wbg_instanceof_Window_747b56d25bab9510:function(e){return r[1].exports.eb(e)},__wbg_new_0599e1276155199a:function(){return r[1].exports.lb()},__wbindgen_string_new:function(e,t){return r[1].exports.tc(e,t)},__wbg_activeTexture_cd2bdafe6ac6a0ca:function(e,t){return r[1].exports.b(e,t)},__wbg_bindTexture_c152014c1f590c01:function(e,t,n){return r[1].exports.f(e,t,n)},__wbg_bindVertexArray_0157543bdbffb06e:function(e,t){return r[1].exports.g(e,t)},__wbg_drawElements_0f9b6bbedd3bebcf:function(e,t,n,o,a){return r[1].exports.F(e,t,n,o,a)},__wbg_createTexture_0656936373117662:function(e){return r[1].exports.v(e)},__wbg_texParameteri_605a63bf3a0a4b49:function(e,t,n,o){return r[1].exports.Mb(e,t,n,o)},__wbg_texImage3D_2327f290d4c5740d:function(e,t,n,o,a,s,c,i,_,u,d,f){return r[1].exports.Lb(e,t,n,o,a,s,c,i,_,u,d,f)},__wbg_generateMipmap_77c3e72f06e7a4c2:function(e,t){return r[1].exports.L(e,t)},__wbg_texSubImage3D_c2face1549f0ffe2:function(e,t,n,o,a,s,c,i,_,u,d,f){return r[1].exports.Ob(e,t,n,o,a,s,c,i,_,u,d,f)},__wbg_deleteTexture_bd49372545cdb940:function(e,t){return r[1].exports.z(e,t)},__wbg_uniformMatrix4fv_007cb082e7936bd4:function(e,t,n,o,a){return r[1].exports.Xb(e,t,n,o,a)},__wbg_width_8d70143974f53aba:function(e){return r[1].exports.cc(e)},__wbg_height_5de843709a60a262:function(e){return r[1].exports.Y(e)},__wbg_disableVertexAttribArray_73c64380cd778613:function(e,t){return r[1].exports.B(e,t)},__wbg_useProgram_c410661f5bd7e81b:function(e,t){return r[1].exports.Yb(e,t)},__wbg_uniform1fv_f7f36e76fc1b2c9a:function(e,t,n,o){return r[1].exports.Tb(e,t,n,o)},__wbg_uniform4f_c4d40e40e608ea3b:function(e,t,n,o,a,s){return r[1].exports.Wb(e,t,n,o,a,s)},__wbg_uniform1f_1d29b82642fdb790:function(e,t,n){return r[1].exports.Sb(e,t,n)},__wbg_uniform2f_278c281b29e9e2c3:function(e,t,n,o){return r[1].exports.Vb(e,t,n,o)},__wbg_uniform1i_4ddec7fb50640fc1:function(e,t,n){return r[1].exports.Ub(e,t,n)},__wbg_createShader_d75402f5935812f0:function(e,t){return r[1].exports.u(e,t)},__wbg_shaderSource_34af5e76165e6a02:function(e,t,n,o){return r[1].exports.Gb(e,t,n,o)},__wbg_compileShader_937cb022d149ec18:function(e,t){return r[1].exports.q(e,t)},__wbg_getShaderParameter_d526091c5166c9a7:function(e,t,n){return r[1].exports.T(e,t,n)},__wbindgen_boolean_get:function(e){return r[1].exports.ec(e)},__wbg_getShaderInfoLog_c4c33d53565d30d6:function(e,t,n){return r[1].exports.S(e,t,n)},__wbg_texImage2D_ee1e475e0e91b3b2:function(e,t,n,o,a,s,c){return r[1].exports.Kb(e,t,n,o,a,s,c)},__wbg_setwidth_7a7150718cc3f0e6:function(e,t){return r[1].exports.Fb(e,t)},__wbg_setheight_c61e5a9990ad7131:function(e,t){return r[1].exports.Bb(e,t)},__wbg_viewport_b47ae83b1f5bfbe9:function(e,t,n,o,a){return r[1].exports.bc(e,t,n,o,a)},__wbg_scissor_40f682e522ab20d2:function(e,t,n,o,a){return r[1].exports.yb(e,t,n,o,a)},__wbg_setonload_f35002b2488461d3:function(e,t){return r[1].exports.Db(e,t)},__wbg_setonerror_eb00bf5798315cb9:function(e,t){return r[1].exports.Cb(e,t)},__wbg_setsrc_7e888e4ced74b27b:function(e,t,n){return r[1].exports.Eb(e,t,n)},__wbg_onload_d85a3367a2cdcbb0:function(e){return r[1].exports.ub(e)},__wbg_new_8719da26c0a1fd20:function(e,t){return r[1].exports.ob(e,t)},__wbg_document_c9bb82e72b87972b:function(e){return r[1].exports.D(e)},__wbg_getElementById_66a113a03886aac6:function(e,t,n){return r[1].exports.O(e,t,n)},__wbg_instanceof_HtmlCanvasElement_0feb941e3d100079:function(e){return r[1].exports.bb(e)},__wbg_parse_b6e057bc5004a9ad:function(e,t){return r[1].exports.vb(e,t)},__wbg_getContext_7fb33d2f2a33d083:function(e,t,n,o){return r[1].exports.N(e,t,n,o)},__wbg_instanceof_WebGl2RenderingContext_0f1d0ce1f564cddc:function(e){return r[1].exports.db(e)},__wbg_createProgram_0e01a0272abf80f2:function(e){return r[1].exports.t(e)},__wbg_attachShader_703542f74d3f4655:function(e,t,n){return r[1].exports.c(e,t,n)},__wbg_linkProgram_13df874c1ec00220:function(e,t){return r[1].exports.hb(e,t)},__wbg_getProgramParameter_30ca8607cd79baba:function(e,t,n){return r[1].exports.R(e,t,n)},__wbg_getProgramInfoLog_a7e39255ecb0047b:function(e,t,n){return r[1].exports.Q(e,t,n)},__wbindgen_number_get:function(e,t){return r[1].exports.oc(e,t)},__wbg_getActiveUniform_30cc8778e1ba660f:function(e,t,n){return r[1].exports.M(e,t,n)},__wbg_name_3db390fc2fc091fb:function(e,t){return r[1].exports.kb(e,t)},__wbg_getUniformLocation_2085f6ce304f30ee:function(e,t,n,o){return r[1].exports.U(e,t,n,o)},__wbg_blendFuncSeparate_a1abbb6bdfc0a7dc:function(e,t,n,o,a){return r[1].exports.h(e,t,n,o,a)},__wbg_enable_a684b41864515bb5:function(e,t){return r[1].exports.H(e,t)},__wbg_cullFace_bf527eb4959a8aa8:function(e,t){return r[1].exports.x(e,t)},__wbg_innerWidth_32946fda40a6a23f:function(e){return r[1].exports.ab(e)},__wbg_innerHeight_58f8a4f389150bf7:function(e){return r[1].exports.Z(e)},__wbg_canvas_c621ddfce1286dee:function(e){return r[1].exports.n(e)},__wbg_setcrossOrigin_7c6eec94244d24ba:function(e,t,n){return r[1].exports.Ab(e,t,n)},__wbindgen_cb_forget:function(e){return r[1].exports.gc(e)},__wbg_getExtension_59696a785661b89b:function(e,t,n){return r[1].exports.P(e,t,n)},__wbg_texImage2D_3c5bf32a5f1e7dff:function(e,t,n,o,a,s,c,i,_,u,d){return r[1].exports.Jb(e,t,n,o,a,s,c,i,_,u,d)},__wbg_createFramebuffer_28e45abdb795ab52:function(e){return r[1].exports.s(e)},__wbg_bindFramebuffer_47d9a15ce41e5299:function(e,t,n){return r[1].exports.e(e,t,n)},__wbg_framebufferTexture2D_58968036d9154ea5:function(e,t,n,o,a,s){return r[1].exports.K(e,t,n,o,a,s)},__wbg_newwithbyteoffsetandlength_f6d835c6e3d68e8c:function(e,t,n){return r[1].exports.rb(e,t,n)},__wbg_performance_f7851e83824fd096:function(e){return r[1].exports.wb(e)},__wbg_now_0aafc2276b5e8d61:function(e){return r[1].exports.tb(e)},__wbg_vertexAttribDivisor_97df148c554b5fea:function(e,t,n){return r[1].exports.Zb(e,t,n)},__wbg_clearColor_56271725c115c7e9:function(e,t,n,o,a){return r[1].exports.o(e,t,n,o,a)},__wbg_clear_7a35983521c8dcf9:function(e,t){return r[1].exports.p(e,t)},__wbg_drawElementsInstanced_28f7d73790509e68:function(e,t,n,o,a,s){return r[1].exports.E(e,t,n,o,a,s)},__wbg_disable_e64678c1a700d912:function(e,t){return r[1].exports.C(e,t)},__wbindgen_closure_wrapper1207:function(e,t,n){return r[1].exports.hc(e,t,n)},__wbindgen_closure_wrapper3642:function(e,t,n){return r[1].exports.ic(e,t,n)},__wbindgen_closure_wrapper3646:function(e,t,n){return r[1].exports.jc(e,t,n)}}}}};function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise(function(t,o){r=n[e]=[t,o]});t.push(r[2]=c);var i,_=document.createElement("script");_.charset="utf-8",_.timeout=120,s.nc&&_.setAttribute("nonce",s.nc),_.src=function(e){return s.p+""+e+".index.js"}(e);var u=new Error;i=function(t){_.onerror=_.onload=null,clearTimeout(d);var r=n[e];if(0!==r){if(r){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",u.name="ChunkLoadError",u.type=o,u.request=a,r[1](u)}n[e]=void 0}};var d=setTimeout(function(){i({type:"timeout",target:_})},12e4);_.onerror=_.onload=i,document.head.appendChild(_)}return({2:[3]}[e]||[]).forEach(function(e){var r=o[e];if(r)t.push(r);else{var n,c=a[e](),i=fetch(s.p+""+{3:"9fbcc01263c1c9609a3b"}[e]+".module.wasm");if(c instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)n=Promise.all([WebAssembly.compileStreaming(i),c]).then(function(e){return WebAssembly.instantiate(e[0],e[1])});else if("function"==typeof WebAssembly.instantiateStreaming)n=WebAssembly.instantiateStreaming(i,c);else{n=i.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,c)})}t.push(o[e]=n.then(function(t){return s.w[e]=(t.instance||t).exports}))}}),Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e},s.w={};var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var _=0;_<c.length;_++)t(c[_]);var u=i;s(s.s=0)}([function(e,t,r){"use strict";r.r(t);let n=[{name:"catalog_aitoff",path:{vert:"src/shaders/catalogs/aitoff.vert",frag:"src/shaders/catalogs/aitoff.frag"}},{name:"catalog_mercator",path:{vert:"src/shaders/catalogs/mercator.vert",frag:"src/shaders/catalogs/mercator.frag"}},{name:"catalog_mollweide",path:{vert:"src/shaders/catalogs/mollweide.vert",frag:"src/shaders/catalogs/mollweide.frag"}},{name:"catalog_ortho",path:{vert:"src/shaders/catalogs/ortho.vert",frag:"src/shaders/catalogs/ortho.frag"}},{name:"black_white_linear",path:{vert:"src/shaders/colormaps/blackwhite.vert",frag:"src/shaders/colormaps/blackwhite.frag"}},{name:"BluePastelRed",path:{vert:"src/shaders/colormaps/BluePastelRed.vert",frag:"src/shaders/colormaps/BluePastelRed.frag"}},{name:"IDL_CB_BrBG",path:{vert:"src/shaders/colormaps/IDL_CB_BrBG.vert",frag:"src/shaders/colormaps/IDL_CB_BrBG.frag"}},{name:"IDL_CB_GnBu",path:{vert:"src/shaders/colormaps/IDL_CB_GnBu.vert",frag:"src/shaders/colormaps/IDL_CB_GnBu.frag"}},{name:"IDL_CB_YIGnBu",path:{vert:"src/shaders/colormaps/IDL_CB_YIGnBu.vert",frag:"src/shaders/colormaps/IDL_CB_YIGnBu.frag"}},{name:"red_temperature",path:{vert:"src/shaders/colormaps/red.vert",frag:"src/shaders/colormaps/red.frag"}},{name:"grid_aitoff",path:{vert:"src/shaders/grid/aitoff.vert",frag:"src/shaders/grid/aitoff.frag"}},{name:"grid_ortho",path:{vert:"src/shaders/grid/ortho.vert",frag:"src/shaders/grid/ortho.frag"}},{name:"grid_mollweide",path:{vert:"src/shaders/grid/mollweide.vert",frag:"src/shaders/grid/mollweide.frag"}},{name:"grid_mercator",path:{vert:"src/shaders/grid/mercator.vert",frag:"src/shaders/grid/mercator.frag"}},{name:"raytracer",path:{vert:"src/shaders/hips/raytracer.vert",frag:"src/shaders/hips/raytracer.frag"}},{name:"rasterizer_aitoff",path:{vert:"src/shaders/hips/rasterizer/aitoff.vert",frag:"src/shaders/hips/rasterizer/aitoff.frag"}},{name:"rasterizer_mercator",path:{vert:"src/shaders/hips/rasterizer/mercator.vert",frag:"src/shaders/hips/rasterizer/mercator.frag"}},{name:"rasterizer_mollweide",path:{vert:"src/shaders/hips/rasterizer/mollweide.vert",frag:"src/shaders/hips/rasterizer/mollweide.frag"}},{name:"rasterizer_ortho",path:{vert:"src/shaders/hips/rasterizer/ortho.vert",frag:"src/shaders/hips/rasterizer/ortho.frag"}},{name:"text",path:{vert:"src/shaders/misc/text.vert",frag:"src/shaders/misc/text.frag"}}];class o{constructor(e){this.aladin=e,this.ongoingTouches=new Array,this.canvas=document.getElementById("canvas"),this.createEvents(),this.then=Date.now()}ongoingTouchIndexById(e){for(let t=0;t<this.ongoingTouches.length;t++){if(this.ongoingTouches[t].identifier===e)return t}return-1}removeTouchFromOnGoingTouches(e){for(let t=0;t<this.ongoingTouches.length;t++)if(this.ongoingTouches[t].identifier===e.identifier){this.ongoingTouches.splice(t,1);break}}updateTouch(e){let t=this.ongoingTouchIndexById(e.identifier);this.ongoingTouches.splice(t,1,e)}touchEventsOccuring(){return this.ongoingTouches.length>0}update(e){return this.aladin.update(e)}render(){this.aladin.render()}createEvents(){let e={NOTHING:0,MOVING:1,ZOOMING:2,properties:{2:{unZoom:!1,startFov:void 0,startDist:void 0}}},t=e.NOTHING;this.canvas.addEventListener("touchstart",r=>{r.preventDefault();for(let e=0;e<r.changedTouches.length;e++)this.ongoingTouches.push(r.changedTouches[e]);let n=this.ongoingTouches.length;if(1==n)t=e.MOVING,this.aladin.press_left_mouse_button(this.ongoingTouches[0].pageX,this.ongoingTouches[0].pageY);else if(2==n){let r=this.ongoingTouches[0],n=this.ongoingTouches[1];this.aladin.release_left_mouse_button(r.pageX,r.pageY),console.log("stop moving"),t=e.ZOOMING,e.properties[t].startDist=Math.hypot(r.pageX-n.pageX,r.pageY-n.pageY),e.properties[t].startFov=this.aladin.get_fov()}else t=e.NOTHING},!1),this.canvas.addEventListener("touchend",r=>{r.preventDefault();for(let e=0;e<r.changedTouches.length;e++){let t=r.changedTouches[e];this.removeTouchFromOnGoingTouches(t)}if(t===e.MOVING)this.aladin.release_left_mouse_button(this.ongoingTouches[0].pageX,this.ongoingTouches[0].pageY),console.log("stop moving"),t=e.NOTHING;else if(t===e.ZOOMING)this.aladin.press_left_mouse_button(this.ongoingTouches[0].pageX,this.ongoingTouches[0].pageY),t=e.NOTHING;else{2==this.ongoingTouches.length&&(t=e.ZOOMING,e.properties[t].startDist=Math.hypot(this.ongoingTouches[0].pageX-this.ongoingTouches[1].pageX,this.ongoingTouches[0].pageY-this.ongoingTouches[1].pageY),e.properties[t].startFov=this.aladin.get_fov())}},!1),this.canvas.addEventListener("touchcancel",r=>{r.preventDefault(),t===e.MOVING&&this.aladin.release_left_mouse_button(this.ongoingTouches[0].pageX,this.ongoingTouches[0].pageY),this.ongoingTouches.clear(),t=e.NOTHING},!1),this.canvas.addEventListener("touchmove",r=>{r.preventDefault();for(let e=0;e<r.changedTouches.length;e++){let t=r.changedTouches[e];this.updateTouch(t)}if(t===e.MOVING)console.log("move!!"),this.aladin.move_mouse(this.ongoingTouches[0].pageX,this.ongoingTouches[0].pageY);else if(t===e.ZOOMING){console.log("zoom!!");let r=Math.hypot(this.ongoingTouches[0].pageX-this.ongoingTouches[1].pageX,this.ongoingTouches[0].pageY-this.ongoingTouches[1].pageY),n=e.properties[t].startFov,o=e.properties[t].startDist;this.aladin.pinch_zoom(n*o/r)}},!1),this.canvas.addEventListener("mousedown",e=>{this.touchEventsOccuring()||this.aladin.press_left_mouse_button(e.clientX,e.clientY)}),this.canvas.addEventListener("mouseup",e=>{this.touchEventsOccuring()||this.aladin.release_left_mouse_button(e.clientX,e.clientY)}),this.canvas.addEventListener("mousemove",e=>{this.touchEventsOccuring()||this.aladin.move_mouse(e.clientX,e.clientY)}),this.canvas.addEventListener("dblclick",e=>{console.log("mouse click double"),this.aladin.double_mouse_button_pressed(e.clientX,e.clientY)}),this.canvas.addEventListener("wheel",e=>{let t=e.deltaY>0?1:-1;this.aladin.wheel_mouse(e.clientX,e.clientY,t)},!1),window.addEventListener("resize",()=>{let e=window.innerWidth,t=window.innerHeight;this.aladin.resize(e,t)})}}function a(e,t){let r=e.substring(4),n="http://tapvizier.u-strasbg.fr/TAPVizieR/tap/sync?phase=RUN&lang=adql&format=json&request=doQuery&query=SELECT%20TOP%201%20table_name%2C%20column_name%2C%20ucd%20FROM%20TAP_SCHEMA.columns%20WHERE%20table_name%3D%27"+encodeURIComponent(r)+"%27%20AND%20ucd%20LIKE%20%27"+encodeURIComponent(t)+"%25%27";var o={method:"GET",headers:new Headers,mode:"cors",cache:"default"};return fetch(n,o).then(e=>e.json()).then(r=>(console.log(e,t,": here are the data",r.data),r.data[0][1]))}function s(e,t,r="*"){let n=[];t.forEach(t=>{console.log(t),n.push('"'+e+'"."'+encodeURIComponent(t)+'"')});let o="SELECT "+n.join(", ")+' FROM "'+e+'"';console.log(o);let a="http://tapvizier.u-strasbg.fr/TAPVizieR/tap/sync?phase=RUN&lang=adql&format=json&request=doQuery&query="+encodeURIComponent(o);var s={method:"GET",headers:new Headers,mode:"cors",cache:"default"};return fetch(a,s).then(e=>e.json()).then(e=>{return e.data})}window.addEventListener("load",async()=>{const e=await Promise.all([r.e(1),r.e(2)]).then(r.bind(null,7));let t=await async function(e){return await Promise.all(n.map(async t=>{let r=await e.read(t.path.vert),n=await e.read(t.path.frag);return{name:t.name,vert_src:r,frag_src:n}}))}(e);console.log(t);let c=new e.WebClient(t);!async function(e){var t={method:"GET",headers:new Headers,mode:"cors",cache:"default"};let[r,n]=await fetch("https://alasky.u-strasbg.fr/MocServer/query?hips_service_url*=*alasky*&&dataproduct_type=image&&hips_tile_format=*png*,*jpeg*&get=record&fmt=json",t).then(e=>e.json()).then(e=>{let t=[],r=new Map;for(let n=0;n<e.length;n++){let o=e[n].ID;r[o]={hips_service_url:e[n].hips_service_url,max_depth:e[n].hips_order,tile_width:e[n].hips_tile_width,hips_tile_format:e[n].hips_tile_format},t.push(o)}return[t,r]});new autoComplete({selector:"#hips-selector",minChars:2,source:function(e,t){e=e.toLowerCase();var n=r,o=[];for(let t=0;t<n.length;t++)n[t].toLowerCase().indexOf(e)>=0&&o.push(n[t]);t(o)},renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var r=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(r,"<b>$1</b>")+"</div>"},onSelect:function(t,r,o){let a=r,{hips_service_url:s,max_depth:c,hips_tile_format:i,tile_width:_}=n[a];e.change_hips(s,_,c,i)}})}(c),async function(e){var t={method:"GET",headers:new Headers,mode:"cors",cache:"default"};let[r,n]=await fetch("https://alasky.u-strasbg.fr/MocServer/query?expr=dataproduct_type%3Dcatalog%26%26nb_rows<%3D500000%26%26nb_rows>%3D50000%26%26data_ucd%3Dpos.parallax*%26%26data_ucd%3Dphot.mag*&get=record&fmt=json",t).then(e=>e.json()).then(e=>{let t=[],r=new Map;for(var n=0;n<e.length;n++){var o=e[n].ID;r[o]={obs_id:e[n].obs_id},t.push(o)}return[t,r]});new autoComplete({selector:"#catalog-selector",minChars:2,source:function(e,t){e=e.toLowerCase();var n=r,o=[];for(let t=0;t<n.length;t++)n[t].toLowerCase().indexOf(e)>=0&&o.push(n[t]);t(o)},renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var r=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(r,"<b>$1</b>")+"</div>"},onSelect:async function(t,r,n){let o=r,c=await a(o,"pos.parallax");console.log("parallax column name: ",c);let i=await a(o,"phot.mag");console.log("phot mag column name: ",i);let _=await a(o,"pos.eq.ra"),u=await a(o,"pos.eq.dec");s(o.substring(4),[_,u,i,c]).then(t=>{console.log("sources: ",t),e.add_catalog("Test",t)})}}),s("J/A+A/566/A43/table2",["RAJ2000","DEJ2000","Bmag","Per"]).then(t=>setTimeout(()=>e.add_catalog("Test",t),1e4))}(c);let i=document.getElementById("proj-select"),_=document.getElementById("enable-grid"),u=document.getElementById("enable-inertia"),d=(document.getElementById("fps-counter"),document.getElementById("grid-color")),f=document.getElementById("grid-alpha"),g=document.getElementById("catalog-alpha"),l=document.getElementById("kernel-strength"),b=document.getElementById("colormap-select"),p=document.getElementById("ra"),h=document.getElementById("dec"),w=document.getElementById("ra_value"),v=document.getElementById("dec_value");document.getElementById("canvas").focus();i.addEventListener("change",()=>{let e=i.value;c.set_projection(e),console.log("change projection to: ",e)},!1),_.addEventListener("change",()=>{_.checked?c.enable_equatorial_grid():c.disable_equatorial_grid()},!1),u.addEventListener("change",()=>{u.checked?c.enable_inertia():c.disable_inertia()},!1),p.addEventListener("change",()=>{console.log("Change!!");let e=p.value,t=h.value;c.set_position(e,t)},!1),h.addEventListener("change",()=>{let e=p.value,t=h.value;c.set_position(e,t)},!1);d.addEventListener("input",e=>{let t=function(e){if(m=e.match(/^#([0-9a-f]{6})$/i)[1],m)return{red:parseInt(m.substr(0,2),16)/255,green:parseInt(m.substr(2,2),16)/255,blue:parseInt(m.substr(4,2),16)/255}}(e.target.value);c.change_grid_color(t.red,t.green,t.blue)},!1),f.addEventListener("input",e=>{let t=e.target.value;c.change_grid_opacity(t)},!1),g.addEventListener("input",e=>{let t=e.target.value;c.set_heatmap_opacity("Test",t)},!1),l.addEventListener("input",e=>{let t=e.target.value;c.set_kernel_strength("Test",t)},!1),b.addEventListener("change",()=>{let e=b.value;c.set_colormap("Test",e)},!1),console.log("sdfsd");let x=new o(c);!function e(){window.requestAnimationFrame(e);let t=Date.now(),r=t-x.then;x.then=t;{let e=x.update(r);x.render(),w.innerText=e[0].toFixed(4),v.innerText=e[1].toFixed(4)}}()})}]);